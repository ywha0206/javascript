<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>User1::register</title>
  <script>

    window.onload = function(){

        const btnSubmit = document.getElementsByName('submit')[0];
		const formUser = document.getElementsByTagName('form')[0];
		

        btnSubmit.onclick = (e) => {
            e.preventDefault();     
                    
            //json 데이터 생성
            const uid = formUser.uid.value;
            const name = formUser.name.value;
            const birth = formUser.birth.value;
            const hp = formUser.hp.value;
            const age = formUser.age.value;
            
            const jsonData = {
                "uid":uid,
                "name":name,
                "birth":birth,
                "hp":hp,
                "age":age
            };
                

            fetch('http://localhost:8080/ch09/user1',{
                method: 'POST',
                headers: {'Content-Type':'application/json'},
                body: JSON.stringify(jsonData)
            })
            .then(resp => resp.json())
            .then(data => {
                console.log(data);
            })
            .catch(err =>{
                console.log(err);
            });

            window.location.replace('/user1/list.html')

        }
    }

  </script>
</head>
<body>
<h3>User1 등록</h3>

<a href="/user1/list.html">목록</a>

<form action="#" method="post">
  <table>
    <tr>
      <td>아이디</td>
      <td><input type="text" name="uid"/> </td>
    </tr>
    <tr>
      <td>이름</td>
      <td><input type="text" name="name"/> </td>
    </tr>
    <tr>
      <td>생년월일</td>
      <td><input type="date" name="birth"/> </td>
    </tr>
    <tr>
      <td>휴대폰</td>
      <td><input type="text" name="hp"/> </td>
    </tr>
    <tr>
      <td>나이</td>
      <td><input type="number" name="age"/> </td>
    </tr>
    <tr>
      <td colspan="2" align="right">
        <input type="submit" name="submit" value="등록하기"/>
      </td>
    </tr>
  </table>
</form>
</body>
</html>